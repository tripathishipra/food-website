"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_orgs_invitations_ts-app_assets_modules_github_sudo_ts"],{29764(a,b,c){c.d(b,{"$S":()=>e,Fk:()=>f,sz:()=>g});var d=c(34855);function e(a,b,c){let e={hydroEventPayload:a,hydroEventHmac:b,visitorPayload:"",visitorHmac:"",hydroClientContext:c},f=document.querySelector("meta[name=visitor-payload]");f instanceof HTMLMetaElement&&(e.visitorPayload=f.content);let g=document.querySelector("meta[name=visitor-hmac]")||"";g instanceof HTMLMetaElement&&(e.visitorHmac=g.content),(0,d.b)(e,!0)}function f(a){let b=a.getAttribute("data-hydro-view")||"",c=a.getAttribute("data-hydro-view-hmac")||"",d=a.getAttribute("data-hydro-client-context")||"";e(b,c,d)}function g(a){let b=a.getAttribute("data-hydro-click-payload")||"",c=a.getAttribute("data-hydro-click-hmac")||"",d=a.getAttribute("data-hydro-client-context")||"";e(b,c,d)}},27303(a,b,c){c.d(b,{V:()=>m,l:()=>n});var d=c(64463),e=c(59753),f=c(254),g=c(29764);let h="team_ids[]",i="role",j=(a,b)=>{let c=document.createElement("input");return c.type="hidden",c.name=a,c.value=b,c},k=a=>{let b=new URLSearchParams(window.location.search),c=new Set(b.getAll(h)),d=document.querySelectorAll(a);for(let e of d)e.checked?c.add(e.value):c.delete(e.value);return[...c]},l=a=>document.querySelectorAll(`${a} > a`);function m(a,b){if(a.checked)for(let c of document.querySelectorAll(b))c.appendChild(j(h,a.value));else for(let d of document.querySelectorAll(`input[type="hidden"][name="${h}"][value="${a.value}"]`))d.remove()}function n(a,b){let c=k(b);for(let d of l(a)){let e=d.getAttribute("href");if(e){let f=new URL(e,window.location.origin),g=new URLSearchParams(f.search.slice(1));for(let i of(g.delete(h),c))g.append(h,i);f.search=g.toString(),d.setAttribute("href",f.toString())}}}function o(){let a=document.querySelector(".js-org-reinstate-forms"),b=document.querySelectorAll(".js-org-reinstate-option:checked");if(!a||1!==b.length)return;let c=b[0].getAttribute("data-form"),d=a.getElementsByClassName("js-togglable-form");for(let e of d)e.classList.add("d-none");let f=document.getElementById(c);f.classList.remove("d-none")}function p(){let a=document.querySelector(".js-seats");if(!a)return z();let b=a.getAttribute("data-filled-seats");return parseInt(b)+z()}function q(){!s()&&(r(),t(),u(),C()?x():(v(".js-plan-no-change",!1),v(".js-plan-changes",!0),v(".js-complete-button",!1),v(".js-invite-button",!0)))}function r(){let a=document.querySelector(".js-filled-seats"),b=p();a&&null!==b&&(a.textContent=b.toString())}function s(){let a=0>=z();return!!a&&(v(".js-plan-no-change",!0),v(".js-plan-changes",!0),!0)}function t(){let a=document.querySelector(".js-seats-remaining");if(a instanceof HTMLElement){a.hidden=!0;let b=A()-p(),c=document.querySelector(".js-seats-remaining-zero"),d=document.querySelector(".js-seats-remaining-singular"),e=document.querySelector(".js-seats-remaining-plural");if(c.hidden=0!==b,d.hidden=1!==b,b>1){let f=document.querySelector(".js-seats-remaining-update-target");f.textContent=String(b)}e.hidden=b<=1}}function u(){let a=document.querySelector(".js-max-seats-warning");a instanceof HTMLElement&&(a.hidden=!B())}function v(a,b){let c=document.querySelector(a);c instanceof HTMLElement&&(c.hidden=b)}(0,e.on)("click",".js-invitation-toggle-team",async function({currentTarget:a}){n(".js-invitations-team-suggestions-pagination",".js-invitation-toggle-team"),m(a,"form.js-org-team-suggestions")}),(0,e.on)("click",".js-invitation-radio-role",async function({currentTarget:a}){let b=a.value;for(let c of l(".js-invitations-team-suggestions-pagination")){let d=c.getAttribute("href");if(d){let e=new URL(d,window.location.origin),f=new URLSearchParams(e.search.slice(1));f.set("role",b),e.search=f.toString(),c.setAttribute("href",e.toString())}}for(let g of document.querySelectorAll(`input[type="hidden"][name="${i}"]`))g.remove();for(let h of document.querySelectorAll("form.js-org-member-role"))h.appendChild(j(i,b))}),(0,e.on)("change",".js-org-reinstate-option",o),(0,d.N7)(".js-org-reinstate-forms",o),(0,d.N7)(".js-member-suggestion",function(){let a=Array.from(document.querySelectorAll(".js-badge")).map(a=>a.querySelector("input").value);if(0!==a.length)for(let b of document.querySelectorAll(".js-member-suggestion")){let c=b.getAttribute("data-autocomplete-value");if(a.includes(c)){b.classList.add("disabled"),b.setAttribute("aria-disabled","true");let d=b.querySelector(".js-non-member-warning-reason"),e=b.querySelector(".js-non-member-warning-action");if(d&&e)for(let f of[d,e])f.textContent=f.getAttribute("data-markup"),f instanceof HTMLElement&&(f.hidden=!1)}}}),(0,e.on)("combobox-commit",".js-badge-container .js-new-org-members-complete-results",a=>{let b=document.querySelector(".js-badge-input"),c=document.querySelector(".js-badges"),d=a.target,e=d.querySelectorAll(".js-badge-template"),f=Array.from(document.querySelectorAll(".js-badge")).map(a=>a.querySelector("input").value);for(let g of e){let h=g.cloneNode(!0),i=h.content,j=i.querySelector("input").value;f.includes(j)||c.append(i)}q(),D(a),b.value="",b.setAttribute("placeholder","")}),(0,e.on)("click",".js-badge-search-container .js-badge",a=>{let b=a.currentTarget,c=b.getAttribute("aria-pressed");"true"===c?b.setAttribute("aria-pressed","false"):b.setAttribute("aria-pressed","true")}),(0,e.on)("details-dialog-close",".js-invite-member-dialog",a=>{let b=a.currentTarget.querySelector(".js-auto-complete-button");b&&(b.disabled=!0)}),(0,e.on)("click",".js-badge-search-container",a=>{let b=a.currentTarget;b.querySelector("input").focus()}),(0,e.on)("click",".js-badge-container .js-member-suggestion",()=>{document.querySelector(".js-badge-input").focus()}),(0,f.w4)("keydown",".js-badge-search-container .js-badge-input",a=>{let b=a.target,c=b.closest(".js-badge-search-container"),d=c.querySelectorAll('.js-badges .js-badge[aria-pressed="true"]'),e=c.getAttribute("data-allow-plan-increase"),f="Backspace"!==a.key||""!==b.value;if(!e&&B()&&f){a.preventDefault();return}if(!f){if(0!==d.length)for(let g of d)g.remove(),E(g);else{let h=c.querySelectorAll(".js-badges .js-badge");if(0===h.length)return;let i=h[h.length-1];i.remove(),E(i)}q()}});let w=null;async function x(){let a=document.querySelector(".js-seats");if(!a)return;let b=new URL(a.getAttribute("data-url"),window.location.origin),c=new URLSearchParams(b.search.slice(1));c.append("seats",p().toString()),b.search=c.toString(),w?.abort();let{signal:d}=w=new AbortController,e=null;try{let f=await fetch(b.toString(),{signal:d,headers:{Accept:"application/json"}});f.ok&&(e=await f.json())}catch{}if(d.aborted||!e)return;let g=e.new_price,h=a.getAttribute("data-original-price");if(h&&g===h){v(".js-plan-no-change",!0);return}y();let i=e.selectors;for(let j in i)for(let k of document.querySelectorAll(j))k.innerHTML=i[j];v(".js-plan-no-change",!0),v(".js-plan-changes",!1),v(".js-complete-button",!0),v(".js-invite-button",!1)}function y(){let a=document.querySelector(".js-new-seats"),b=document.querySelector(".js-new-users-singular"),c=document.querySelector(".js-new-users-plural"),d=z();b.hidden=1!==d,c.hidden=1===d,a.textContent=String(d)}function z(){let a=document.querySelectorAll(".js-badge");return a.length||0}function A(){let a=document.querySelector(".js-seats");if(!a)return 0;let b=a.getAttribute("data-total-seats");return parseInt(b)}function B(){return A()===p()}function C(){let a=p();return A()<a}function D(a){let b=a.target;(0,g.sz)(b)}function E(a){(0,g.sz)(a)}},94056(a,b,c){c.d(b,{Z:()=>m});var d=c(19146),e=c(98249),f=c(65935),g=c(63047);let h=!1;async function i(){let a=document.querySelector("link[rel=sudo-modal]"),b=document.querySelector(".js-sudo-prompt");if(b instanceof HTMLTemplateElement)return b;if(a){let c=await (0,e.a)(document,function(a){let b=new URL(a,window.location.origin),c=new URLSearchParams(b.search.slice(1));return c.set("webauthn-support",(0,g.T)()),b.search=c.toString(),b.toString()}(a.href));return document.body.appendChild(c),document.querySelector(".js-sudo-prompt")}throw Error("couldn't load sudo prompt")}let j=!1;async function k(){if(h)return!1;h=!0,j=!1;let a=await i(),b=a.content.cloneNode(!0),c=await (0,d.W)({content:b});return await new Promise(a=>{c.addEventListener("dialog:remove",function(){h=!1,a()},{once:!0})}),j}async function l(a,b,c="Sudo authentication failed.",d="Too many authentication attemtps. Please try again later.",e=".js-sudo-error",f){try{await b.text()}catch(g){if(!g.response)throw g;let h;switch(g.response.status){case 401:h=c;break;case 429:h=d;break;default:h="An unknown error occurred. Please try again later."}if(a.querySelector(e).textContent=h,a.querySelector(e).hidden=!1,f&&(a.querySelector(f).value=""),401!==g.response.status&&429!==g.response.status)throw g;return}j=!0,a.closest("details").removeAttribute("open")}async function m(){let a=await fetch("/sessions/in_sudo",{headers:{accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(a.ok){let b=await a.text();if("true"===b)return!0}return k()}(0,f.AC)(".js-sudo-webauthn-form",async function(a,b){await l(a,b)}),(0,f.AC)(".js-sudo-github-mobile-form",async function(a,b){await l(a,b)}),(0,f.AC)(".js-sudo-totp-form",async function(a,b){await l(a,b,void 0,void 0,".flash-error","#totp")}),(0,f.AC)(".js-sudo-password-form",async function(a,b){await l(a,b,"Incorrect password.","Too many password attempts. Please wait and try again.",void 0,".js-sudo-password")})},63047(a,b,c){c.d(b,{T:()=>e,k:()=>f});var d=c(8433);function e(){return(0,d.Zh)()?"supported":"unsupported"}async function f(){return await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()?"supported":"unsupported"}}}])
//# sourceMappingURL=app_assets_modules_github_orgs_invitations_ts-app_assets_modules_github_sudo_ts-438ec5f9a5f7.js.map